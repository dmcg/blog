---
layout: default
---

<div class="post">
  <h1 class="post-title">{{ page.title }}</h1>
  <span class="post-date">{{ page.date | date_to_string }}</span>

  <div class="post-tags">
    Tags:
    {% if post %}
    {% assign tags = post.tags %}
    {% else %}
    {% assign tags = page.tags %}
    {% endif %}
    {% for tag in tags %}
    <a href="{{site.baseurl}}/tags/#{{tag|slugize}}">{{tag}}</a>
    {% unless forloop.last %}&nbsp;{% endunless %}
    {% endfor %}
  </div>
  <div>
  {{ content }}

  <div>{% include twitter-plug.html %}</div>
</div>

<div class="relatedPosts">

  <h4>You May Also Enjoy</h4>

  {% assign maxRelated = 4 %}
  {% assign minCommonTags =  2 %}
  {% assign maxRelatedCounter = 0 %}

  {% for post in site.posts %}

  {% assign sameTagCount = 0 %}
  {% assign commonTags = '' %}

  {% for tag in post.tags %}
  {% if post.url != page.url %}
  {% if page.tags contains tag %}
  {% assign sameTagCount = sameTagCount | plus: 1 %}
  {% capture tagmarkup %} <span class="label label-default">{{ tag }}</span> {% endcapture %}
  {% assign commonTags = commonTags | append: tagmarkup %}
  {% endif %}
  {% endif %}
  {% endfor %}

  {% if sameTagCount >= minCommonTags %}
  <div>
    <h5><a href="{{ site.baseurl }}{{ post.url }}">{{ post.title }}</a></h5>
  </div>
  {% assign maxRelatedCounter = maxRelatedCounter | plus: 1 %}
  {% if maxRelatedCounter >= maxRelated %}
  {% break %}
  {% endif %}
  {% endif %}

  {% endfor %}

</div>
{% include comments.html %}

